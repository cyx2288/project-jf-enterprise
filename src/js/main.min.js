/**
 * 左侧tab页和右侧tab标签iframe交互以及相关
 * 陈羽翔
 * 2016.9.20
 */

var getPcExplorer={getExplorer:function(){var explorer=window.navigator.userAgent;if(explorer.indexOf("MSIE")>=0){var browser=navigator.appName;var b_version=navigator.appVersion;var version=b_version.split(";");var trim_Version=version[1].replace(/[ ]/g,"");if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE6.0"){return"IE 6.0"}else{if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE7.0"){return"IE 7.0"}else{if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE8.0"){return"IE 8.0"}else{if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE9.0"){return"IE 9.0"}else{if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE10.0"){return"IE 10.0"}else{if(browser=="Microsoft Internet Explorer"&&trim_Version=="MSIE11.0"){return"IE 11.0"}else{return"IE"}}}}}}}else{if(explorer.indexOf("Firefox")>=0){return"Firefox"}else{if(explorer.indexOf("Chrome")>=0){return"Chrome"}else{if(explorer.indexOf("Opera")>=0){return"Opera"}else{if(explorer.indexOf("Safari")>=0){return"Safari"}}}}}},isPC:function(){var userAgentInfo=navigator.userAgent;var Agents=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod");var flag=true;for(var v=0;v<Agents.length;v++){if(userAgentInfo.indexOf(Agents[v])>0){flag=false;break}}return flag}};void function(){var clickTab=document.getElementById("accordion1").getElementsByClassName("panel-body");var tabView=document.getElementById("iframeNavdiv");var iframeUrl=document.getElementById("iframeTt");var tabPositoin=0;for(var i=0;i<clickTab.length;i++){clickTab[i].addEventListener("click",clickTabChange,false)}document.getElementById("closs_all_tabs").addEventListener("click",clickCloseAll,false);function clickCloseAll(event){var closeEle=document.getElementById("iframeNavdiv").getElementsByTagName("span");for(var i=closeEle.length-1;i>=1;i--){if(closeEle[i].className!="sp_display"){deleteTab(closeEle[i],event)}}changeTabPositon(-9999,300)}function clickTabChange(){var clickTabSelect=document.getElementById("accordion1").getElementsByClassName("panel-select");clickTabSelect[0].className="panel-body";this.className="panel-body panel-select";var tabViewOne=tabView.childNodes;var pdType=0;for(var ii=0;ii<tabViewOne.length;ii++){if(this.innerHTML.indexOf("首页")>=0){pdType=1;break}else{if(tabViewOne[ii].nodeType==1&&tabViewOne[ii].className.indexOf("other_raw")<0){if(tabViewOne[ii].title==this.innerHTML){pdType=1;break}}}}if(pdType){clearTabClass();tabViewOne[ii].className="sp_display";rightIframeHide(this.innerHTML);hasTabChangePosition(tabViewOne[ii])}else{clearTabClass();var newEle=addElement("span","","",this.innerHTML,"iframeNavdiv","");newEle.innerHTML=this.innerHTML+"<i></i>";setTimeout(function(){newEle.className="sp_display"},10);changeTabPositon(-9999,300);newEle.getElementsByTagName("i")[0].addEventListener("click",deleteTabIcon,false);function deleteTabIcon(event){var farEle=this.parentNode;if(this.parentNode.className=="sp_display"){var farBroEle=farEle.previousSibling;clearTabClass();farBroEle.className="sp_display";rightIframeHide(farBroEle.title,0);deleteTab(farEle,event);hasTabChangePosition(farBroEle);rtabToLtab(farBroEle)}else{deleteTab(farEle,event);var lastChildTar=tabView.lastChild;var fatherWidth=document.getElementById("iframeNavFather").offsetWidth;var bottomRightPosition=lastChildTar.offsetWidth+lastChildTar.offsetLeft;setTimeout(function(){if(bottomRightPosition>fatherWidth&&(fatherWidth-bottomRightPosition)>tabPositoin){hasTabChangePosition(tabView.getElementsByClassName("sp_display")[0])}else{if(bottomRightPosition<=fatherWidth){changeTabPositon(-9999,300)}}},100)}}newEle.addEventListener("click",changeTabSelect,false);rightIframeHide(0,0);var newIframe=addElement("div","","",this.innerHTML,"iframeTt","");var iframeUrlGet=this.attributes["taburl"].nodeValue;newIframe.innerHTML='<iframe scrolling="auto" frameborder="0" src="'+iframeUrlGet+'"></iframe>';newIframe.className="transtion_move";newIframe.getElementsByTagName("iframe")[0].src=iframeUrlGet;setTimeout(function(){newIframe.className=""},100)}}tabView.firstChild.addEventListener("click",changeTabSelect,false);document.getElementById("jf_company_name").addEventListener("click",function(){tabView.firstChild.click()},false);function changeTabSelect(){clearTabClass();this.className="sp_display";rightIframeHide(this.title,0);rtabToLtab(this)}function rtabToLtab(thisEle){selectLeftTab(thisEle.title)}function deleteTab(thisEle,event){removeElement(thisEle);rightIframeHide(thisEle.title,1);stopPro(event)}function hasTabChangePosition(thisEle){var tabWidth=thisEle.offsetWidth;var tabLeft=thisEle.offsetLeft;var faWidth=parseInt(document.getElementById("iframeNavFather").style.width);var pointPosition=tabLeft-(faWidth-tabWidth)/2;var reletivePosition=0-tabPositoin-pointPosition;changeTabPositon(reletivePosition,500)}function stopPro(e){if(e){e.stopPropagation()}else{window.event.cancelBubble=true}}function clearTabClass(){var changeEleClassName=document.getElementById("iframeNav").getElementsByClassName("sp_display")[0];
    changeEleClassName.className=changeEleClassName.className.replace("sp_display","")}function rightIframeHide(titleChange,isdeleteele){var iframeViewOne=iframeUrl.childNodes;for(var j=0;j<iframeViewOne.length;j++){if(iframeViewOne[j].nodeType==1&&iframeViewOne[j].tagName=="DIV"){if(titleChange&&iframeViewOne[j].title==titleChange){if(isdeleteele){removeElement(iframeViewOne[j])}else{iframeViewOne[j].style.display="block";iframeViewOne[j].className="transtion_move";if(iframeViewOne[j].title=="首页"){var thisIframeSrc=iframeViewOne[j].getElementsByTagName("iframe")[0].src;iframeViewOne[j].getElementsByTagName("iframe")[0].src=thisIframeSrc}var thisIframe=iframeViewOne[j];setTimeout(function(){thisIframe.className=""},100)}}else{if(!isdeleteele){iframeViewOne[j].style.display="none"}}}}}function removeElement(_element){var _parentElement=_element.parentNode;if(_parentElement){_parentElement.removeChild(_element)}}function addElement(tag,type,id,titlename,fatherEle,classname){var obj=document.createElement(tag);if(type){obj.type=type}if(id){obj.id=id}if(classname){obj.className=classname}if(titlename){obj.title=titlename}if(fatherEle=="document.body"){document.body.appendChild(obj)}else{if(fatherEle){document.getElementById(fatherEle).appendChild(obj)}}return obj}function getStyle(obj,attr){var ie=!+"\v1";if(attr=="backgroundPosition"){if(ie){return obj.currentStyle.backgroundPositionX+" "+obj.currentStyle.backgroundPositionY}}if(obj.currentStyle){return obj.currentStyle[attr]}else{return document.defaultView.getComputedStyle(obj,null)[attr]}}function ReFl(){var x2="";var x3="";var x1=0;var windowHeight=document.body.clientHeight;var windowWidth=document.body.clientWidth;var iframeWidth="auto";if(parseInt(windowWidth)>1024){x1=parseInt(windowHeight)-124;x2=x1+"px";x3=x1+40+"px"}else{x2=(parseInt(windowHeight)-45)+"px";x3="auto"}var id="iframeCss";var s=document.getElementById(id);if(!s){s=addElement("style","text/css","iframeCss","","document.body","")}s.innerHTML="#iframeTt iframe{height:"+x2+"!important;}.sidebar-wrap{height:"+x3+"!important;}"}ReFl();window.addEventListener("resize",ReFl,false);function changeFatherDiv(){var leftEleOne=document.getElementById("pageGoback").offsetWidth;var leftEleTwo=document.getElementById("turnLeft").offsetWidth;var righEleOne=document.getElementById("turnRight").offsetWidth;var rightEleTwo=document.getElementById("closs_all_tabs").offsetWidth;var totalBalance=parseFloat(leftEleOne)+parseFloat(leftEleTwo)+parseFloat(righEleOne)+parseFloat(rightEleTwo)+5;var maxwidth=document.getElementById("iframeNav").offsetWidth-totalBalance;document.getElementById("iframeNavFather").style.width=maxwidth+"px"}changeFatherDiv();window.addEventListener("resize",changeFatherDiv,false);function changeTabPositon(pxNum,timer1){var targetEle=tabView;pxNum=parseInt(tabPositoin)+parseInt(pxNum);var fatherWidth=document.getElementById("iframeNavFather").offsetWidth;var lastChildTar=targetEle.lastChild;var bottomRightPosition=lastChildTar.offsetWidth+lastChildTar.offsetLeft;if(bottomRightPosition>fatherWidth){if(pxNum<=0&&(fatherWidth-bottomRightPosition)<=pxNum){}else{if(pxNum>0){pxNum=0}else{if((fatherWidth-bottomRightPosition)>pxNum){pxNum=fatherWidth-bottomRightPosition}}}}else{pxNum=0}changePosition(timer1);tabPositoin=pxNum;function changePosition(timer1){targetEle.style.transform="translateX("+pxNum+"px)";targetEle.style.transition="transform  "+timer1+"ms";setTimeout(function(){targetEle.style.transition=""},parseInt(timer1))}}document.getElementById("turnLeft").addEventListener("click",function(){changeTabPositon(parseInt(document.getElementById("iframeNavFather").style.width)/2,300)},false);document.getElementById("turnRight").addEventListener("click",function(){changeTabPositon((0-parseInt(document.getElementById("iframeNavFather").style.width)/2),300)},false);document.getElementById("overviewSidebarTrigger").addEventListener("click",clickSidebarTriggerAll,false);function clickSidebarTriggerAll(){clickSidebarTrigger();setTimeout(function(){document.getElementsByTagName("footer")[0].addEventListener("click",clickSidebarTrigger,false);document.getElementsByTagName("nav")[0].addEventListener("click",clickSidebarTrigger,false);document.getElementById("bg-overview").addEventListener("click",clickSidebarTrigger,false);var thisEle=document.getElementById("accordion").getElementsByClassName("panel-collapse");for(var i=0;i<thisEle.length;i++){thisEle[i].addEventListener("click",clickSidebarTrigger,false)}},100)}function clickSidebarTrigger(){var thisEle=document.getElementById("overviewSidebarTrigger").getElementsByTagName("span")[0];var thisEleClassName=thisEle.className;if(thisEleClassName=="material-design-hamburger__layer"){thisEle.className=thisEleClassName+" material-design-hamburger__icon--to-arrow";document.getElementById("overviewSidebar").style.transform="translateX(0px)";document.getElementById("bg-overview").style.display="block";setTimeout(function(){document.getElementById("bg-overview").className="show"
},10)}else{if(thisEleClassName.indexOf("material-design-hamburger__icon--to-arrow")>0){thisEle.className=thisEleClassName.replace("material-design-hamburger__icon--to-arrow","material-design-hamburger__icon--from-arrow");document.getElementById("overviewSidebar").style.transform="";document.getElementById("bg-overview").className="";document.getElementById("bg-overview").addEventListener("transitionend",myTraFunction);document.getElementById("bg-overview").addEventListener("webkitTransitionEnd",myTraFunction);function myTraFunction(){document.getElementById("bg-overview").style.display="";document.getElementsByTagName("footer")[0].removeEventListener("click",clickSidebarTrigger,false);document.getElementsByTagName("nav")[0].removeEventListener("click",clickSidebarTrigger,false);document.getElementById("bg-overview").removeEventListener("click",clickSidebarTrigger,false);document.getElementById("bg-overview").removeEventListener("webkitTransitionEnd",myTraFunction);document.getElementById("bg-overview").removeEventListener("transitionend",myTraFunction);var thisEle=document.getElementById("accordion").getElementsByClassName("panel-collapse");for(var i=0;i<thisEle.length;i++){thisEle[i].removeEventListener("click",clickSidebarTrigger,false)}}}else{if(thisEleClassName.indexOf("material-design-hamburger__icon--from-arrow")>0){thisEle.className=thisEleClassName.replace("material-design-hamburger__icon--from-arrow","material-design-hamburger__icon--to-arrow");document.getElementById("overviewSidebar").style.transform="translateX(0px)";document.getElementById("bg-overview").style.display="block";setTimeout(function(){document.getElementById("bg-overview").className="show"},10)}}}}clickRightTab();function clickRightTab(){var thisClassEle=document.getElementById("accordion").getElementsByClassName("panel-heading");for(var i=0;i<thisClassEle.length;i++){thisClassEle[i].addEventListener("click",function(){this.getElementsByTagName("a")[0].click()},false)}}if(getPcExplorer.isPC()&&getPcExplorer.getExplorer()=="Safari"){var newStyle=addElement("style","","safari_pc","","document.body");newStyle.innerHTML=".guide-overview{margin-left:0}"}}();function selectLeftTab(thisTextHtml){var clickTab=document.getElementById("accordion1").getElementsByClassName("panel-body");var thisIframe=document.getElementById("iframeTt").getElementsByTagName("div");for(var i=0;i<clickTab.length;i++){if(clickTab[i].innerHTML==thisTextHtml){if(clickTab[i].parentNode.className.indexOf("in")<0){clickTab[i].parentNode.parentNode.getElementsByTagName("h4")[0].getElementsByTagName("a")[0].click()}clickTab[i].click();break}}}function deleteselectTab(thisTextHtml,event){var thisallEle=document.getElementById("iframeNavdiv").getElementsByTagName("span");for(var i=0;i<thisallEle.length;i++){if(thisallEle[i].getAttribute("title")==thisTextHtml){thisallEle[i].getElementsByTagName("i")[0].click()}}}function selectLeftTabone(thisTextHtml,thisUrl){var clickTab=document.getElementById("accordion1").getElementsByClassName("panel-body");var thisIframe=document.getElementById("iframeTt").getElementsByTagName("div");for(var i=0;i<clickTab.length;i++){if(clickTab[i].innerHTML==thisTextHtml){if(clickTab[i].parentNode.className.indexOf("in")<0){clickTab[i].parentNode.parentNode.getElementsByTagName("h4")[0].getElementsByTagName("a")[0].click()}clickTab[i].click();break}}for(var j=0;j<thisIframe.length;j++){if(thisIframe[j].getAttribute("title")==thisTextHtml){thisIframe[j].getElementsByTagName("iframe")[0].src=thisUrl;break}}}var jfCustomerService={init:function(service){if(!$("#MEIQIA-PANEL-HOLDER").length>0){function jfServiceSwitch(visibility){if(visibility==="visible"){$("#MEIQIA-PANEL-HOLDER").removeClass("hide").addClass("show");setTimeout(function(){$("#MEIQIA-PANEL-HOLDER").removeClass("show")},300)}else{$("#MEIQIA-PANEL-HOLDER").addClass("hide")}}(function(m,ei,q,i,a,j,s){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};j=ei.createElement(q);s=ei.getElementsByTagName(q)[0];j.async=true;j.charset="UTF-8";j.src="//static.meiqia.com/dist/meiqia.js";s.parentNode.insertBefore(j,s)})(window,document,"script","_MEIQIA");_MEIQIA("entId","39750");_MEIQIA("manualInit");_MEIQIA("withoutBtn");_MEIQIA("allSet",jfServiceSwitch);_MEIQIA("getPanelVisibility",jfServiceSwitch);_MEIQIA("init");_MEIQIA("metadata",service)}},click:function(){_MEIQIA("showPanel")}};function jfPageJump(thisTextHtml,jumpID){var clickTab=document.getElementById("accordion1").getElementsByClassName("panel-body");var thisIframe=document.getElementById("iframeTt").getElementsByTagName("div");for(var i=0;i<clickTab.length;i++){if(clickTab[i].innerHTML==thisTextHtml){if(clickTab[i].parentNode.className.indexOf("in")<0){clickTab[i].parentNode.parentNode.getElementsByTagName("h4")[0].getElementsByTagName("a")[0].click()}clickTab[i].click();for(var j=0;j<thisIframe.length;j++){if(thisIframe[j].getAttribute("title")==thisTextHtml){var thisTargetIframe=thisIframe[j].getElementsByTagName("iframe")[0];var thisJumpBtn=thisTargetIframe.contentWindow.document.getElementById(jumpID);
    var thisPageTitle=thisTargetIframe.contentWindow.document.getElementsByTagName("h2")[0];if(thisPageTitle){targetPageJump()}else{if(getPcExplorer.getExplorer()=="MSIE"){thisTargetIframe.attachEvent("onreadystatechange",function(){if(thisTargetIframe.readyState==="complete"||thisTargetIframe.readyState=="loaded"){targetPageJump()}})}else{thisTargetIframe.addEventListener("load",targetPageJump,false)}}function targetPageJump(){thisTargetIframe.removeEventListener("load",targetPageJump,false);var thisJumpBtn=thisTargetIframe.contentWindow.document.getElementById(jumpID);if(thisJumpBtn){thisJumpBtn.click()}}break}}}}}function iframePageGoback(thisUrl){var thisIframe=document.getElementById("iframeTt").getElementsByTagName("div");for(var i=1;i<thisIframe.length;i++){if(thisIframe[i].style.display!="none"){var thisTargetIframe=thisIframe[i].getElementsByTagName("iframe")[0];if(thisUrl){thisTargetIframe.contentWindow.location.href=thisUrl}else{var thisWindowHref=thisTargetIframe.contentWindow.location.pathname;var thisiframeUrl=thisTargetIframe.getAttribute("src");thisiframeUrl="/"+thisiframeUrl;if(thisiframeUrl!=thisWindowHref){thisTargetIframe.contentWindow.history.go(-1)}}}}};